{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Asus/OneDrive/Desktop/webbanhanggom/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/Asus/OneDrive/Desktop/webbanhanggom/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/Asus/OneDrive/Desktop/webbanhanggom/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from'react';import axios from'axios';import moment from'moment';var useFetch=function useFetch(url){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),loadedData=_useState4[0],setLoadedData=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isloadData=_useState6[0],setIsLoadedData=_useState6[1];useEffect(function(){var ourRequest=axios.CancelToken.source();var isMounted=true;function fetchData(){return _fetchData.apply(this,arguments);}function _fetchData(){_fetchData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var res,_data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get(url,{cancelToken:ourRequest.token});case 3:res=_context.sent;_data=res&&res.data?res.data:[];if(_data&&_data.length>0&&isMounted&&isloadData===true){_data=_data.map(function(item){item.Date=moment(item.Date).format('DD/MM/YYYY');return item;});_data.reverse();}setData(_data);setLoadedData(false);_context.next=13;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](0);if(axios.isCancel(_context.t0)){console.log('Request canceled',_context.t0.message);}else{console.log(_context.t0.name,_context.t0.message);}case 13:case\"end\":return _context.stop();}},_callee,null,[[0,10]]);}));return _fetchData.apply(this,arguments);}fetchData();return function(){isMounted=false;ourRequest.cancel();};},[url,isloadData]);return{data:data,loadedData:loadedData};};export default useFetch;","map":{"version":3,"names":["useState","useEffect","axios","moment","useFetch","url","_useState","_useState2","_slicedToArray","data","setData","_useState3","_useState4","loadedData","setLoadedData","_useState5","_useState6","isloadData","setIsLoadedData","ourRequest","CancelToken","source","isMounted","fetchData","_fetchData","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","res","_data","wrap","_callee$","_context","prev","next","get","cancelToken","token","sent","length","map","item","Date","format","reverse","t0","isCancel","console","log","message","name","stop","cancel"],"sources":["C:/Users/Asus/OneDrive/Desktop/webbanhanggom/src/custom/fetch.js"],"sourcesContent":["import { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport moment from 'moment';\r\n\r\nconst useFetch = (url) => {\r\n    const [data, setData] = useState([]);\r\n    const [loadedData, setLoadedData] = useState(true);\r\n    const [isloadData, setIsLoadedData] = useState(false);\r\n\r\n    useEffect(() => {\r\n        const ourRequest = axios.CancelToken.source();\r\n        let isMounted = true;\r\n\r\n        async function fetchData() {\r\n            try {\r\n                const res = await axios.get(url, {\r\n                    cancelToken: ourRequest.token,\r\n                });\r\n\r\n                let data = res && res.data ? res.data : [];\r\n\r\n                if (data && data.length > 0 && isMounted && isloadData === true) {\r\n                    data = data.map((item) => {\r\n                        item.Date = moment(item.Date).format('DD/MM/YYYY');\r\n                        return item;\r\n                    });\r\n                    data.reverse();\r\n                }\r\n\r\n                setData(data);\r\n                setLoadedData(false);\r\n            } catch (e) {\r\n                if (axios.isCancel(e)) {\r\n                    console.log('Request canceled', e.message);\r\n                } else {\r\n                    console.log(e.name, e.message);\r\n                }\r\n            }\r\n        }\r\n\r\n        fetchData();\r\n\r\n        return () => {\r\n            isMounted = false;\r\n            ourRequest.cancel();\r\n        };\r\n    }, [url, isloadData]);\r\n\r\n    return {\r\n        data,\r\n        loadedData,\r\n    };\r\n};\r\n\r\nexport default useFetch;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}